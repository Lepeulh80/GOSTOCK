(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[115],{8069:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var n=a(7294);function l({onClose:e,onAdd:t,prefill:a}){let[l,r]=(0,n.useState)({name:"",category:"",stock:0,alert_threshold:5,buy_price:0,sell_price:0,notes:"",barcode:""}),[u,o]=(0,n.useState)(!1);(0,n.useEffect)(()=>{a&&r(e=>({...e,...a}))},[a]);let c=e=>{let{name:t,value:a}=e.target;r(e=>({...e,[t]:a}))},i=async()=>{try{if(!l.name)return alert("Le nom du produit est requis");o(!0);let a={name:l.name,category:l.category||"general",stock:parseInt(l.stock,10)||0,alert_threshold:parseInt(l.alert_threshold,10)||5,buy_price:parseFloat(l.buy_price)||0,sell_price:parseFloat(l.sell_price)||0,notes:l.notes||"",barcode:l.barcode||null,created_at:new Date().toISOString()};await t(a),e()}catch(e){alert(e.message||"Erreur")}finally{o(!1)}};return n.createElement("div",{className:"modal-card p-4 border rounded",role:"dialog","aria-modal":"true"},n.createElement("h3",null,"Ajouter un produit"),n.createElement("label",null,"Nom",n.createElement("input",{name:"name","aria-label":"Nom",value:l.name,onChange:c})),n.createElement("label",null,"Cat\xe9gorie",n.createElement("input",{name:"category",value:l.category,onChange:c})),n.createElement("label",null,"Stock initial",n.createElement("input",{name:"stock",value:l.stock,onChange:c,type:"number"})),n.createElement("label",null,"Seuil d'alerte",n.createElement("input",{name:"alert_threshold",value:l.alert_threshold,onChange:c,type:"number"})),n.createElement("label",null,"Prix d'achat",n.createElement("input",{name:"buy_price",value:l.buy_price,onChange:c,type:"number",step:"0.01"})),n.createElement("label",null,"Prix de vente",n.createElement("input",{name:"sell_price",value:l.sell_price,onChange:c,type:"number",step:"0.01"})),n.createElement("label",null,"Notes",n.createElement("textarea",{name:"notes",value:l.notes,onChange:c})),n.createElement("label",null,"Code-barres",n.createElement("input",{name:"barcode",value:l.barcode,onChange:c})),n.createElement("div",{style:{display:"flex",gap:8,marginTop:8}},n.createElement("button",{onClick:i,disabled:u},u?"Ajout...":"Ajouter"),n.createElement("button",{onClick:e},"Annuler")))}},2008:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products/AddProductModal",function(){return a(8069)}])}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2008)}),_N_E=e.O()}]);